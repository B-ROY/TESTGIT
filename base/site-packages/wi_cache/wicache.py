#encoding = utf-8

import sys, os
from django.core.cache import parse_backend_uri
from django.conf import settings

try:
	memcache_settings = settings.memcache_settings
except:
	mdefault = "memcached://127.0.0.1:11211/"
	memcache_settings = {"CACHE_BACKEND": mdefault, "PAGE_CACHE_BACKEND": mdefault}
	memcache_settings.update({"NINGX_CACHE_BACKEND": mdefault})

try:
	import pylibmc

	scheme, host, params = parse_backend_uri(memcache_settings.get("CACHE_BACKEND"))
	model_cache = pylibmc.Client([host])
except Exception, e:
	import memcache

	scheme, host, params = parse_backend_uri(memcache_settings.get("CACHE_BACKEND"))
	model_cache = memcache.Client([host])

try:
	import pylibmc

	scheme, host, params = parse_backend_uri(memcache_setting.get("NINGX_CACHE_BACKEND"))
	nginx_cache = pylibmc.Client([host])
except Exception, e:
	import memcache

	scheme, host, params = parse_backend_uri(memcache_settings.get("NINGX_CACHE_BACKEND"))
	nginx_cache = memcache.Client([host])

try:
	import pylibmc

	scheme, host, params = parse_backend_uri(memcache_settings.get("PAGE_CACHE_BACKEND"))
	page_cache = pylibmc.Client([host])
except Exception, e:
	import memcache

	scheme, host, params = parse_backend_uri(memcache_settings.get("PAGE_CACHE_BACKEND"))
	page_cache = memcache.Client([host])